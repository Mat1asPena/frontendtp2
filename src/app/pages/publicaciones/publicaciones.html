<section class="posts-page">
    <div class="posts-overlay"></div>

    <div class="posts-container">
        <header class="posts-header">
        <h2 class="posts-title">Publicaciones</h2>

        <div class="posts-filter">
            <label class="posts-label">Ordenar:
            <select class="posts-select" (change)="changeOrder($any($event.target).value)">
                <option value="fecha">Fecha</option>
                <option value="likes">Me gusta</option>
            </select>
            </label>
        </div>
        </header>

        <div class="posts-list">
        @for (post of posts; track $index;) {
            <article class="post-card">
            <h3 class="post-title">{{post.titulo}}</h3>
            <p class="post-message">{{post.mensaje}}</p>

            <div class="post-meta">
                <span class="post-likes">{{post.likes}} ♥</span>
                <span class="post-date">{{post.fecha | date:'short'}}</span>
            </div>

            <div class="post-actions">
                <button class="btn-like" (click)="toggleLike(post)">Me gusta / quitar</button>
                @if (auth.getUser()?.nombreUsuario === post.author) {
                <button class="btn-delete" (click)="deletePost(post.id)">Eliminar</button>
                }
            </div>
            </article>
        }
        </div>

        <div class="posts-more">
        <button class="btn-loadmore" (click)="loadMore()">Cargar más</button>
        </div>
    </div>
</section>